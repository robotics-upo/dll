<!--
-->
<launch>
  # Bag filename 

  <arg name="base_frame_id" default="base_link"/>
  <arg name="odom_frame_id" default="odom"/>
  <arg name="global_frame_id" default="map"/>
  <arg name="use_rviz" default="false"/>
  <arg name="initial_x" default="6.7"/>
  <arg name="initial_y" default="14.0"/>
  <arg name="initial_z" default="0.0"/>
  <arg name="initial_a" default="0.18"/> 
  <arg name="map" default="catec.bt" />
  <arg name="map_path" default="$(find-pkg-share dll)/maps/$(var map)"/>
  <arg name="topic" default="/os1_cloud_node/points_non_dense"/>

  # Launch DLL
  <node name="dll_node" exec="dll_node" pkg="dll" output="screen">
    
    <param name="in_cloud" value="$(var topic)" />
    <param name="base_frame_id" value="$(var base_frame_id)" />
    <param name="odom_frame_id" value="$(var odom_frame_id)" />
    <param name="global_frame_id" value="$(var global_frame_id)" />
    
    <param name="update_rate" value="10.0" />
    <param name="map_path" value="$(var map_path)" />    
    <param name="update_min_d" value="0.1" />
    <param name="update_min_a" value="0.1" />
    <param name="update_min_time" value="0.1" />
    <param name="initial_x"   value="$(var initial_x)"/>
    <param name="initial_y"   value="$(var initial_y)"/>
    <param name="initial_z"   value="$(var initial_z)"/>
    <param name="initial_a"   value="$(var initial_a)"/>
    <param name="use_imu" value="false" />
    
  </node>

  <node if="$(var use_rviz)" name="rviz" exec="rviz2" pkg="rviz2"/> 
  <node name="viz" pkg="rviz2" exec="rviz2"/>
  <executable cmd="ros2 bag play $(find-pkg-share dll)/bags/rosbag_experiment1_drone --start-offset 0 -r 1.0 " />
</launch>	
